# Codex エージェントメモ

## デフォルト
- サンドボックスは read-only。書き込みや生成には `with_escalated_permissions: true` と1行の理由を付けて承認を取る。
- ネットワークは restricted。ダウンロード前提にしない。
- 簡単な作業ではプランを作らない。作る場合はステップ完了ごとに更新。

## セーフティ
- 破壊的コマンド（`git reset --hard` など）は指示がない限り禁止。
- ユーザーの既存変更を戻さない。予期しない差分を見たら確認する。
- コミットの amend はユーザー依頼時のみ。
- 非 ASCII は既存がそうで、かつ理由があるときのみ使う。

## ワークフロー
- 検索は `rg`、ファイルリストは `rg --files` を優先。
- 単一ファイル編集は `apply_patch` を推奨。自動生成物では使わない。
- コメントは不可解なロジックのみ短く付ける。
- テスト/ビルドは可能な範囲で実行し、ログは要点だけ報告。

## 命名ポリシー
- 変数名は短縮形（`base_p`, `base_q` など）を避け、役割が一目で分かるフル単語の名前（例: `base_pos`, `base_quat`）を使う。

## 返答スタイル
- 簡潔でフレンドリー。変更報告は「何を/どこで/なぜ」を先に書き、`src/file.ts:42` 形式でファイルを指す。
- レビューは重大度順に指摘し、リスクやテスト不足を明示。
- 次の一手（テスト/コミット/デプロイなど）が自然なときだけ提案。

## コマンド例
```bash
rg "keyword"                  # 文字列検索
rg --files | rg "\.ts$"       # ファイルリスト絞り込み
apply_patch <<'PATCH'
*** Update File: path/to/file
@@
-old line
+new line
*** End Patch
PATCH
```

## フロントエンド
- 既存のデザインシステムがあれば順守。なければ意図のあるタイポ・色・モーションを選び、凡庸なデフォルトを避ける。
- デスクトップとモバイルの両方で動作させる。
